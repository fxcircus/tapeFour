/* ======================================== */
/* ===== TAPEFOUR THEME SYSTEM BASE ===== */
/* ======================================== */
:root {
  /* ===== THEME-INDEPENDENT SYSTEM COLORS ===== */
  /* Transparent and common overlay colors */
  --color-transparent: transparent;
  --color-black: #000000;
  --color-white: #ffffff;
  
  /* Opacity variants for overlays and effects */
  --overlay-light: rgba(255, 255, 255, 0.1);
  --overlay-medium: rgba(255, 255, 255, 0.08);
  --overlay-dark: rgba(0, 0, 0, 0.1);
  --overlay-shadow: rgba(0, 0, 0, 0.2);
  --overlay-subtle: rgba(0, 0, 0, 0.05);
  --overlay-hover: rgba(0, 0, 0, 0.08);
  
  /* ===== TEXTURE & GRAIN COLORS ===== */
  --grain-primary: rgba(50, 40, 25, 0.04);
  --grain-secondary: rgba(50, 40, 25, 0.02);
  --grain-fine: rgba(50, 40, 25, 0.015);
  --grain-coarse: rgba(50, 40, 25, 0.01);
  --grain-detail: rgba(107, 79, 51, 0.03);
  
  /* ===== MODAL & BACKDROP COLORS ===== */
  --modal-backdrop: rgba(50, 40, 25, 0.5);
  --waveform-overlay: rgba(0, 0, 0, 0.1);
  
  /* ===== GLOW & EFFECT COLORS ===== */
  --glow-play: rgba(34, 197, 94, 0.3);
  --glow-stop: rgba(245, 158, 11, 0.3);
  --glow-record: rgba(210, 50, 25, 0.4);
  --glow-record-subtle: rgba(210, 50, 25, 0.3);
  --glow-bounce: rgba(210, 135, 51, 0.3);
  --glow-settings: rgba(133, 102, 58, 0.3);
  --glow-solo: rgba(33, 117, 255, 0.3);
  --glow-reverse: rgba(147, 51, 234, 0.3);
  --glow-half-speed: rgba(209, 140, 51, 0.3);
  --glow-volume: rgba(34, 197, 94, 0.3);
  --glow-accent: rgba(209, 140, 51, 0.4);
  
  /* ===== SVG & STROKE COLORS ===== */
  --svg-stroke-dark: #4e3924;
  --svg-stroke-medium: #8a7156;
  --svg-stroke-light: #5a4936;
  --svg-stroke-highlight: #ffffff40;
  --svg-fill-dark: #5a4936;
  --svg-fill-outline: #3d2e1f;
  
  /* ===== TABLE & UI TEXT COLORS ===== */
  --table-header-color: #DCCDB7;
  --table-text-color: #DCCDB7;
  --table-muted-color: #6B4F33;
  --kbd-text-color: #DCCDB7;
}

/* ========================================= */
/* ===== DEFAULT VINTAGE THEME COLORS ===== */
/* ========================================= */
:root,
:root[data-theme="vintage"] {
  /* ===== PRIMARY CHASSIS COLORS ===== */
  --color-chassis: hsl(42, 25%, 78%);           /* Main background - warm paper */
  --color-control-surface: hsl(35, 18%, 65%);   /* Panel backgrounds */
  --color-track-well: hsl(28, 36%, 40%);        /* Dark brown for tracks/wells */
  --color-text-primary: hsl(35, 28%, 15%);      /* Main text - dark ink */
  
  /* ===== VINTAGE ACCENT COLORS ===== */
  --color-accent-warm: hsl(28, 65%, 52%);       /* Burnt orange for highlights */
  --color-accent-olive: hsl(52, 20%, 45%);      /* Muted olive for secondary */
  --color-accent-purple: hsl(271, 81%, 56%);    /* Purple for reverse buttons */
  
  /* ===== FUNCTIONAL COLORS ===== */
  --color-record: hsl(18, 75%, 48%);            /* Warm orange for REC */
  --color-solo: hsl(208, 100%, 55%);            /* Blue for SOLO */
  --color-mute: hsl(35, 45%, 58%);              /* Desaturated clay for MUTE */
  --color-play: hsl(142, 71%, 45%);             /* Green for PLAY */
  --color-stop: hsl(43, 88%, 50%);              /* Amber for STOP */
  
  /* ===== INTERACTIVE STATES ===== */
  --color-hover-overlay: hsla(0, 0%, 100%, 0.08);
  --color-active-overlay: hsla(0, 0%, 0%, 0.04);
  --color-shadow-inset: hsla(0, 0%, 0%, 0.12);
  
  /* ===== DIVIDER & STRUCTURAL COLORS ===== */
  --color-divider: #8a7156; /* one shade darker than the chassis brown */
  --color-border: var(--color-text-primary);
  
  /* ===== REEL COLORS ===== */
  --color-reel-light: hsl(35,15%,80%);
  --color-reel-mid: hsl(35,15%,68%);
  --color-reel-dark: hsl(35,15%,55%);
  --color-reel-hub: var(--color-divider);   /* bronze-brown */
  --color-reel-screw: var(--color-divider);
  --color-tape: hsl(30,25%,30%);
  
  /* ===== LEGACY COMPATIBILITY ===== */
  --paper: var(--color-chassis);
  --panel: var(--color-control-surface);
  --track: var(--color-track-well);
  --accent: var(--color-accent-warm);
  --ink: var(--color-text-primary);
  --green: var(--color-play);
  --orange: var(--color-stop);
  --red: var(--color-record);
  --sky: var(--color-solo);
  --divider: var(--color-divider);
}

/* ============================================= */
/* ===== TASCAM 424 MKII INSPIRED THEME ===== */
/* ============================================= */
:root[data-theme="indie"] {
  /* ===== CHASSIS & PANEL COLORS (STEEL BLUE) ===== */
  --color-chassis: hsl(207, 30%, 50%);           /* Deep TASCAM blue background */
  --color-control-surface: hsl(207, 35%, 42%);   /* Darker panel sections */
  --color-track-well: hsl(207, 40%, 35%);        /* Dark wells and faders */

  /* ===== PRIMARY TEXT COLOR ===== */
  --color-text-primary: hsl(210, 10%, 92%);      /* Light grey text for contrast */

  /* ===== FUNCTIONAL & BUTTON COLORS ===== */
  --color-record: hsl(5, 80%, 55%);              /* TASCAM red-orange REC button */
  --color-play: hsl(135, 65%, 45%);              /* Green PLAY button */
  --color-stop: hsl(10, 25%, 85%);               /* Light grey STOP button */
  --color-solo: hsl(47, 90%, 60%);               /* Amber-yellow SOLO button */
  --color-mute: hsl(210, 15%, 65%);              /* Muted steel-blue-grey MUTE button */

  /* ===== ACCENT COLORS (KNOBS & METERS) ===== */
  --color-accent-warm: hsl(16, 75%, 60%);        /* Warm orange-red for highlights */
  --color-accent-purple: hsl(260, 45%, 65%);     /* Purple accent (TASCAM knob-like) */
  --color-accent-olive: hsl(170, 40%, 60%);      /* Muted teal/olive knobs */

  /* ===== INTERACTIVE STATES ===== */
  --color-hover-overlay: hsla(210, 20%, 95%, 0.12);
  --color-active-overlay: hsla(210, 10%, 5%, 0.15);
  --color-shadow-inset: hsla(210, 30%, 20%, 0.3);

  /* ===== DIVIDERS & STRUCTURAL ELEMENTS ===== */
  --color-divider: hsl(207, 25%, 40%);
  --color-border: hsl(207, 25%, 30%);

  /* ===== CASSETTE REEL & TAPE COLORS ===== */
  --color-reel-light: hsl(210, 15%, 70%);
  --color-reel-mid: hsl(210, 20%, 55%);
  --color-reel-dark: hsl(210, 25%, 40%);
  --color-reel-hub: hsl(210, 30%, 30%);
  --color-tape: hsl(210, 30%, 25%);

  /* ===== LEGACY COMPATIBILITY ===== */
  --paper: var(--color-chassis);
  --panel: var(--color-control-surface);
  --track: var(--color-track-well);
  --accent: var(--color-accent-warm);
  --ink: var(--color-text-primary);
  --green: var(--color-play);
  --orange: var(--color-stop);
  --red: var(--color-record);
  --sky: var(--color-solo);
  --divider: var(--color-divider);
}


:root[data-theme="disco"] {
  --color-chassis: hsl(320, 85%, 20%);               /* Vibrant pink-magenta base */
  --color-control-surface: hsl(330, 90%, 28%);       /* High energy neon pink */
  --color-track-well: hsl(310, 90%, 18%);            /* Dark violet for contrast */

  --color-text-primary: hsl(0, 0%, 100%);            /* Pure white for maximum clarity */

  --color-record: hsl(350, 100%, 80%);               /* Neon pink-red */
  --color-play: hsl(180, 100%, 90%);                 /* Icy aqua */
  --color-stop: hsl(60, 100%, 85%);                  /* Soft neon yellow */
  --color-solo: hsl(330, 100%, 90%);                 /* Bright bubblegum */
  --color-mute: hsl(195, 100%, 85%);                 /* Light neon cyan */

  --color-accent-warm: hsl(340, 100%, 88%);
  --color-accent-purple: hsl(300, 100%, 90%);
  --color-accent-olive: hsl(170, 100%, 85%);

  --color-hover-overlay: hsla(340, 100%, 95%, 0.3);  /* Soft glow */
  --color-active-overlay: hsla(330, 100%, 85%, 0.5); /* Vivid flash */
  --color-shadow-inset: hsla(310, 100%, 8%, 0.9);    /* Subtle depth */

  --color-divider: hsl(330, 100%, 60%);
  --color-border: hsl(320, 100%, 70%);               /* Bright and visible */

  /* Reels */
  --color-reel-light: hsl(330, 100%, 70%);
  --color-reel-mid: hsl(320, 100%, 50%);
  --color-reel-dark: hsl(310, 100%, 35%);
  --color-reel-hub: hsl(300, 100%, 25%);
  --color-reel-screw: hsl(340, 100%, 90%);
  --color-tape: hsl(330, 100%, 20%);

  /* Legacy fallbacks */
  --paper: var(--color-chassis);
  --panel: var(--color-control-surface);
  --track: var(--color-track-well);
  --accent: var(--color-accent-warm);
  --ink: var(--color-text-primary);
  --green: var(--color-play);
  --orange: var(--color-stop);
  --red: var(--color-record);
  --sky: var(--color-solo);
  --divider: var(--color-divider);
}


:root[data-theme="dark"] {
  --color-chassis: hsl(215, 12%, 15%);
  --color-control-surface: hsl(215, 12%, 10%);
  --color-track-well: hsl(215, 10%, 12%);
  --color-text-primary: hsl(215, 5%, 95%);

  --color-record: hsl(10, 85%, 60%);
  --color-play: hsl(130, 85%, 50%);
  --color-stop: hsl(220, 15%, 85%);
  --color-solo: hsl(45, 90%, 60%);
  --color-mute: hsl(210, 10%, 70%);

  --color-accent-warm: hsl(195, 85%, 65%);
  --color-accent-purple: hsl(270, 60%, 65%);
  --color-accent-olive: hsl(165, 70%, 60%);

  --color-hover-overlay: hsla(210, 15%, 95%, 0.1);
  --color-active-overlay: hsla(210, 15%, 5%, 0.2);
  --color-shadow-inset: hsla(0, 0%, 0%, 0.35);

  --color-divider: hsl(215, 10%, 25%);
  --color-border: hsl(215, 10%, 20%);

  /* Legacy compatibility */
  --paper: var(--color-chassis);
  --panel: var(--color-control-surface);
  --track: var(--color-track-well);
  --accent: var(--color-accent-warm);
  --ink: var(--color-text-primary);
  --green: var(--color-play);
  --orange: var(--color-stop);
  --red: var(--color-record);
  --sky: var(--color-solo);
  --divider: var(--color-divider);
}

/* ===== TR-808 DRUM MACHINE INSPIRED THEME ===== */
:root[data-theme="808"] {
  --color-chassis: hsl(0, 0%, 12%);               /* Dark charcoal background */
  --color-control-surface: hsl(0, 0%, 16%);       /* Panel base */
  --color-track-well: hsl(0, 0%, 10%);            /* Darker wells */
  --color-text-primary: hsl(45, 100%, 85%);       /* Creamy vintage label */

  --color-record: hsl(10, 85%, 60%);              /* Bright red pad */
  --color-play: hsl(45, 95%, 55%);                /* Yellow pad */
  --color-stop: hsl(35, 90%, 50%);                /* Warm amber pad */
  --color-solo: hsl(25, 80%, 55%);                /* Orange step key */
  --color-mute: hsl(0, 0%, 65%);                  /* White step key */

  --color-accent-warm: hsl(20, 100%, 55%);        /* TR-808 orange print */
  --color-accent-purple: hsl(260, 45%, 55%);      /* Not prominent in 808, muted */
  --color-accent-olive: hsl(60, 20%, 55%);        /* Used for panel contrast text */

  --color-hover-overlay: hsla(0, 0%, 100%, 0.08);
  --color-active-overlay: hsla(0, 0%, 100%, 0.15);
  --color-shadow-inset: hsla(0, 0%, 0%, 0.3);

  --color-divider: hsl(0, 0%, 30%);
  --color-border: hsl(0, 0%, 20%);

  --color-reel-light: hsl(0, 0%, 40%);
  --color-reel-mid: hsl(0, 0%, 30%);
  --color-reel-dark: hsl(0, 0%, 20%);
  --color-reel-hub: hsl(0, 0%, 10%);
  --color-reel-screw: hsl(0, 0%, 60%);
  --color-tape: hsl(0, 0%, 5%);

  /* Legacy compatibility */
  --paper: var(--color-chassis);
  --panel: var(--color-control-surface);
  --track: var(--color-track-well);
  --accent: var(--color-accent-warm);
  --ink: var(--color-text-primary);
  --green: var(--color-play);
  --orange: var(--color-stop);
  --red: var(--color-record);
  --sky: var(--color-solo);
  --divider: var(--color-divider);
}


/* Typography - Theme-Specific Fonts */
@import url('https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500;600;700&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Audiowide:wght@400&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Russo+One&display=swap');
@import url('https://api.fontsource.org/v1/fonts/satoshi/css?subset=latin&weights=400,500,600,700');

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

/* Base Styles with Paper Grain Texture */
html {
  background: var(--color-chassis);
  /* Coarse paper grain overlay for authentic analogue feel */
  background-image: 
    /* Fine paper grain */
    radial-gradient(circle at 20% 50%, var(--grain-primary) 1px, var(--color-transparent) 1px),
    radial-gradient(circle at 80% 20%, var(--grain-primary) 1px, var(--color-transparent) 1px),
    radial-gradient(circle at 40% 80%, var(--grain-primary) 1px, var(--color-transparent) 1px),
    /* Coarse grain overlay */
    repeating-linear-gradient(
      45deg,
      var(--color-transparent) 0px,
      var(--grain-secondary) 1px,
      var(--color-transparent) 2px
    ),
    repeating-linear-gradient(
      -45deg,
      var(--color-transparent) 0px,
      var(--grain-secondary) 1px,
      var(--color-transparent) 2px
    );
  background-size: 
    50px 50px, 
    70px 70px, 
    60px 60px,
    3px 3px,
    3px 3px;
  background-position: 0 0, 30px 30px, 15px 45px, 0 0, 0 0;
}

body {
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
  font-weight: 400;
  color: var(--color-text-primary);
  background: var(--color-chassis);
  min-height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 48px 20px; /* Increased padding by 8px */
  position: relative;
  letter-spacing: -0.01em; /* Subtle letter spacing for readability */
}

/* ===== THEME-SPECIFIC TYPOGRAPHY ===== */

/* Vintage Theme - IBM Plex Mono */
:root body,
:root[data-theme="vintage"] body {
  font-family: 'IBM Plex Mono', 'SF Mono', Monaco, monospace;
  letter-spacing: 0.02em;
}

/* Indie Theme - Press Start 2P */
:root[data-theme="indie"] body {
  font-family: 'Press Start 2P', monospace;
  letter-spacing: 0.1em;
  font-size: 13px; /* Smaller size for pixelated font readability */
}

/* Disco Theme - Audiowide */
:root[data-theme="disco"] body {
  font-family: 'Audiowide', sans-serif;
  letter-spacing: 0.05em;
  font-weight: 400;
}

/* Dark Theme - Satoshi */
:root[data-theme="dark"] body {
  font-family: 'Satoshi', -apple-system, BlinkMacSystemFont, sans-serif;
  letter-spacing: -0.01em;
  font-weight: 400;
}

/* HipHop Theme - Russo One */
:root[data-theme="808"] body {
  font-family: 'Russo One', sans-serif;
  letter-spacing: 0.03em;
  font-weight: 400;
}

/* The rest of the styles are unchanged from the original index.html */

/* Main Chassis Container */
.recorder-container {
  background: var(--color-control-surface);
  border-radius: 12px;
  border: 1px solid var(--color-text-primary);
  box-shadow: 
    0 2px 4px var(--overlay-hover),
    inset 0 1px 0 var(--overlay-light);
  max-width: 800px;
  margin: 0 auto;
  padding: 40px; /* Increased padding by 8px */
  width: 100%;
  display: flex;
  flex-direction: column;
  gap: 32px; /* Increased gap by 8px */
  position: relative;
  overflow: hidden;
}

/* Enhanced grain texture for the recorder */
.recorder-container::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-image: 
    repeating-linear-gradient(0deg, var(--color-transparent), var(--grain-fine) 1px, var(--color-transparent) 2px),
    repeating-linear-gradient(90deg, var(--color-transparent), var(--grain-fine) 1px, var(--color-transparent) 2px),
    repeating-linear-gradient(45deg, var(--color-transparent), var(--grain-coarse) 1px, var(--color-transparent) 2px),
    repeating-linear-gradient(-45deg, var(--color-transparent), var(--grain-coarse) 1px, var(--color-transparent) 2px),
    radial-gradient(circle at 25% 25%, var(--color-transparent) 60%, var(--grain-detail) 100%),
    radial-gradient(circle at 75% 25%, var(--color-transparent) 60%, var(--grain-detail) 100%),
    radial-gradient(circle at 25% 75%, var(--color-transparent) 60%, var(--grain-detail) 100%),
    radial-gradient(circle at 75% 75%, var(--color-transparent) 60%, var(--grain-detail) 100%);
  background-size: 2px 2px, 2px 2px, 3px 3px, 3px 3px, 100px 100px, 100px 100px, 100px 100px, 100px 100px;
  pointer-events: none;
  z-index: 1;
  mix-blend-mode: multiply;
  opacity: 0.5;
}

/* Ensure content is above the grain */
.recorder-container > * {
  position: relative;
  z-index: 2;
}

/* Main Title - Theme-Specific Typography */
.header {
  font-size: 28px;
  font-weight: 500;
  font-family: inherit; /* Inherit from body theme font */
  letter-spacing: inherit; /* Inherit theme-specific letter spacing */
  color: var(--color-text-primary);
  margin-bottom: 4px; /* 4pt grid alignment */
  text-align: center; /* Center the title */
}

/* Theme-specific header adjustments */
:root[data-theme="indie"] .header {
  font-size: 18px; /* Smaller for Press Start 2P readability */
}

:root[data-theme="disco"] .header {
  font-size: 32px; /* Larger for futuristic Audiowide impact */
  text-transform: uppercase;
}

:root[data-theme="808"] .header {
  font-size: 30px; /* Bold impact for Russo One */
  text-transform: uppercase;
}

/* Cassette Counter/Reel Panel with Inset Border */
.cassette-display {
  background: var(--color-control-surface);
  border-radius: 6px;
  padding: 48px 40px; /* Increased padding for better breathing room */
  border: 2px solid var(--color-text-primary);
  /* Inset border for hardware feel */
  box-shadow: 
    inset 0 1px 3px var(--color-shadow-inset),
    inset 0 -1px 0 var(--overlay-light);
  display: flex;
  flex-direction: column;
  justify-content: space-between; /* Better distribution of elements */
  align-items: center;
  gap: 28px; /* Increased gap for better separation */
  min-height: 180px; /* More height for better proportions */
  position: relative;
}

/* Cassette Tape Reels - Maximum Size for Dominant Presence */
.tape-reel {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  width: 104px; /* Increased further from 88px */
  height: 104px; /* Increased further from 88px */
}

.left-reel {
  left: 80px; /* Better positioning with increased padding */
}

.right-reel {
  right: 80px; /* Better positioning with increased padding */
}

.reel-center {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 28px; /* Increased from 24px */
  height: 28px; /* Increased from 24px */
  background: var(--color-reel-hub);
  border-radius: 50%;
  border: 1px solid var(--color-text-primary);
  box-shadow: inset 0 3px 4px var(--color-shadow-inset);
}

.reel-holes {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 76px; /* Increased from 64px to match larger reel */
  height: 76px; /* Increased from 64px to match larger reel */
}

/* Reel Holes - Slightly Larger for Better Visibility */
.hole {
  position: absolute;
  width: 5px; /* Increased from 4px */
  height: 5px; /* Increased from 4px */
  background: var(--color-reel-mid);
  border-radius: 50%;
  border: 1px solid var(--color-reel-dark);
  box-shadow: inset 0 1px 1px var(--color-shadow-inset);
}

.hole:nth-child(1) {
  top: 0;
  left: 50%;
  transform: translateX(-50%);
}

.hole:nth-child(2) {
  top: 25%;
  right: 0;
  transform: translateY(-50%);
}

.hole:nth-child(3) {
  bottom: 25%;
  right: 0;
  transform: translateY(50%);
}

.hole:nth-child(4) {
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
}

.hole:nth-child(5) {
  bottom: 25%;
  left: 0;
  transform: translateY(50%);
}

.hole:nth-child(6) {
  top: 25%;
  left: 0;
  transform: translateY(-50%);
}

/* Ultra-Smooth Tape Reel Animations - Professional Grade */
@keyframes spin {
  from {
    transform: translateY(-50%) rotate(0deg);
  }
  to {
    transform: translateY(-50%) rotate(360deg);
  }
}

@keyframes spinSmoothDecelerate {
  0% {
    transform: translateY(-50%) rotate(0deg);
    animation-timing-function: linear;
  }
  25% {
    transform: translateY(-50%) rotate(90deg);
    animation-timing-function: cubic-bezier(0.165, 0.84, 0.44, 1);
  }
  50% {
    transform: translateY(-50%) rotate(180deg);
    animation-timing-function: cubic-bezier(0.23, 1, 0.32, 1);
  }
  75% {
    transform: translateY(-50%) rotate(270deg);
    animation-timing-function: cubic-bezier(0.075, 0.82, 0.165, 1);
  }
  100% {
    transform: translateY(-50%) rotate(360deg);
    animation-timing-function: cubic-bezier(0.19, 1, 0.22, 1);
  }
}

@keyframes reelStop {
  0% {
    animation-timing-function: cubic-bezier(0.25, 0.46, 0.45, 0.94);
  }
  100% {
    transform: translateY(-50%) rotate(0deg);
  }
}

.tape-reel {
  /* Buttery smooth transition for all state changes */
  transition: transform 2.5s cubic-bezier(0.19, 1, 0.22, 1);
  transform-origin: center center;
  will-change: transform; /* Optimize for smooth animation */
  transform: translateY(-50%);
}

.tape-reel.spinning {
  animation: spin 2.8s linear infinite;
  transition: none; /* Disable transition while actively spinning */
}

/* Ultra-smooth deceleration - like real vintage tape machines */
.tape-reel.stopping {
  animation: reelStop 1.5s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
  transition: none !important;
}

/* SVG Reel Styles - Authentic Cassette Tape Appearance */
.reel-base {
  fill: var(--color-track-well) !important; /* Dark brown for tape area */
}

.reel-face {
  fill: var(--color-control-surface) !important; /* Match cassette display background */
  stroke: var(--color-text-primary);
  stroke-width: 1;
}

.reel-rim {
  fill: none !important;
  stroke: var(--color-text-primary);
  stroke-width: 2;
}

.reel-hub {
  fill: var(--color-reel-hub) !important; /* Bronze-brown center hub */
  stroke: var(--color-text-primary);
  stroke-width: 1;
}

.reel-shadow {
  opacity: 0.3;
}

.tape-ring {
  fill: none;
  stroke: var(--svg-stroke-dark);
  stroke-width: 8;
  filter: blur(0.8px);
  opacity: 0.8;
}

.hub-rim {
  fill: none;
  stroke: var(--svg-stroke-light);
  stroke-width: 1;
}

.reel-highlight {
  fill: none;
  stroke: var(--svg-stroke-highlight);
  stroke-width: 1.5;
}

.screw {
  fill: var(--svg-fill-dark);
  stroke: var(--svg-fill-outline);
  stroke-width: 0.5;
}

/* Fader Controls with Depth and Reset Animation */
.fader {
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
  width: 25px;
  height: 180px;
  background: var(--color-track-well);
  border-radius: 4px;
  border: 1px solid var(--color-text-primary);
  /* 1px inner shadow for depth without true 3D */
  box-shadow: inset 0 1px 3px var(--color-shadow-inset);
  outline: none;
  cursor: pointer;
  writing-mode: vertical-lr;
  direction: rtl;
  position: relative;
  transition: all 0.15s ease;
}

/* Fader Reset Animation */
.fader.fader-resetting {
  animation: faderReset 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

@keyframes faderReset {
  0% {
    box-shadow: 
      inset 0 1px 3px var(--color-shadow-inset),
      0 0 0 0 var(--color-transparent);
  }
  50% {
    box-shadow: 
      inset 0 1px 3px var(--color-shadow-inset),
      0 0 8px 2px var(--glow-accent);
  }
  100% {
    box-shadow: 
      inset 0 1px 3px var(--color-shadow-inset),
      0 0 0 0 var(--color-transparent);
  }
}

/* Firefox specific track styling */
.fader::-moz-range-track {
  background: var(--color-track-well);
  border: none;
  border-radius: 2px;
  height: 180px;
  width: 4px;
}

/* WebKit track styling */
.fader::-webkit-slider-runnable-track {
  background: var(--color-track-well);
  border-radius: 2px;
  height: 180px;
  width: 16px;
}

/* Fader Thumbs - Updated Color System - Removed conflicting generic rules */

.fader::-webkit-slider-thumb {
  appearance: none;
  -webkit-appearance: none;
  width: 30px;
  height: 40px;
  background: var(--color-accent-warm) !important;
  background-color: var(--color-accent-warm) !important;
  border: 1px solid var(--color-text-primary);
  border-radius: 12%;
  cursor: pointer;
  transition: all 0.15s ease;
  margin-left: -7px;
  position: relative;
  box-shadow: 
    0 1px 2px var(--overlay-shadow),
    inset 0 18px 0 0 var(--color-chassis),
    inset 0 -18px 0 0 var(--color-chassis);
}

.fader::-webkit-slider-thumb:hover {
  background: color-mix(in srgb, var(--color-accent-warm) 85%, white 15%) !important;
  background-color: color-mix(in srgb, var(--color-accent-warm) 85%, white 15%) !important;
  box-shadow: 
    0 1px 2px var(--overlay-shadow),
    inset 0 18px 0 0 var(--color-chassis),
    inset 0 -18px 0 0 var(--color-chassis);
}

.fader::-moz-range-thumb {
  width: 30px;
  height: 40px;
  background: var(--color-accent-warm) !important;
  background-color: var(--color-accent-warm) !important;
  border: 1px solid var(--color-text-primary);
  border-radius: 12%;
  cursor: pointer;
  transition: all 0.15s ease;
  box-shadow: 
    inset 0 18px 0 0 var(--color-chassis),
    inset 0 -18px 0 0 var(--color-chassis);
}

.fader::-moz-range-thumb:hover {
  background: color-mix(in srgb, var(--color-accent-warm) 85%, white 15%) !important;
  background-color: color-mix(in srgb, var(--color-accent-warm) 85%, white 15%) !important;
  box-shadow: 
    inset 0 18px 0 0 var(--color-chassis),
    inset 0 -18px 0 0 var(--color-chassis);
}

/* Master Fader - Enhanced Styling with Reset Animation */
.master-fader {
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
  width: 25px;
  height: 180px;
  background: var(--color-track-well);
  border-radius: 4px;
  border: 1px solid var(--color-text-primary);
  /* 1px inner shadow for depth */
  box-shadow: inset 0 1px 3px var(--color-shadow-inset);
  outline: none;
  cursor: pointer;
  writing-mode: vertical-lr;
  direction: rtl;
  position: relative;
  transition: all 0.15s ease;
}

/* Master Fader Reset Animation */
.master-fader.fader-resetting {
  animation: faderReset 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

.master-fader::-webkit-slider-runnable-track {
  background: var(--color-track-well);
  border-radius: 2px;
  height: 180px;
  width: 16px;
}

.master-fader::-webkit-slider-thumb {
  appearance: none;
  -webkit-appearance: none;
  width: 30px;
  height: 40px;
  background: var(--color-accent-warm) !important;
  background-color: var(--color-accent-warm) !important;
  border: 1px solid var(--color-text-primary);
  border-radius: 15%;
  cursor: pointer;
  transition: all 0.15s ease;
  margin-left: -7px;
  box-shadow: 
    0 1px 2px var(--overlay-shadow),
    inset 0 18px 0 0 var(--color-chassis),
    inset 0 -18px 0 0 var(--color-chassis);
}

.master-fader::-webkit-slider-thumb:hover {
  background: color-mix(in srgb, var(--color-accent-warm) 85%, white 15%) !important;
  background-color: color-mix(in srgb, var(--color-accent-warm) 85%, white 15%) !important;
  box-shadow: 
    0 1px 2px var(--overlay-shadow),
    inset 0 18px 0 0 var(--color-chassis),
    inset 0 -18px 0 0 var(--color-chassis);
}

.master-fader::-moz-range-track {
  background: var(--color-track-well);
  border: none;
  border-radius: 2px;
  height: 180px;
  width: 4px;
}

.master-fader::-moz-range-thumb {
  width: 30px;
  height: 40px;
  background: var(--color-accent-warm) !important;
  background-color: var(--color-accent-warm) !important;
  border: 1px solid var(--color-text-primary);
  border-radius: 15%;
  cursor: pointer;
  transition: all 0.15s ease;
  box-shadow: 
    inset 0 18px 0 0 var(--color-chassis),
    inset 0 -18px 0 0 var(--color-chassis);
}

.master-fader::-moz-range-thumb:hover {
  background: color-mix(in srgb, var(--color-accent-warm) 85%, white 15%) !important;
  background-color: color-mix(in srgb, var(--color-accent-warm) 85%, white 15%) !important;
  box-shadow: 
    inset 0 18px 0 0 var(--color-chassis),
    inset 0 -18px 0 0 var(--color-chassis);
}

/* Pan Knob Styling */

.pan-knob-container {
  display: flex;
  justify-content: center;
  align-items: center;
  margin: 0;
  position: relative;
  width: 40px;
  height: 40px;
  z-index: 100;
}

.pan-knob {
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
  width: 35px;
  height: 35px;
  background: var(--track);
  border-radius: 50%;
  border: 2px solid var(--ink);
  outline: none;
  cursor: pointer;
  position: relative;
  z-index: 11;
}

/* Hide the default slider track and thumb */
.pan-knob::-webkit-slider-runnable-track {
  background: transparent;
  border: none;
  width: 40px;
  height: 40px;
}

.pan-knob::-webkit-slider-thumb {
  appearance: none;
  -webkit-appearance: none;
  width: 0;
  height: 0;
  background: transparent;
  border: none;
  cursor: pointer;
}

.pan-knob::-moz-range-track {
  background: transparent;
  border: none;
  width: 40px;
  height: 40px;
}

.pan-knob::-moz-range-thumb {
  width: 0;
  height: 0;
  background: transparent;
  border: none;
  cursor: pointer;
}

/* Pan Knob Rotating Indicator - Fixed Transform Origin */
.pan-knob-container::before {
  content: '';
  position: absolute;
  width: 3px;
  height: 12px;
  background: var(--color-chassis);
  border: 1px solid var(--color-text-primary);
  border-radius: 2px;
  top: 6px;
  left: 50%;
  /* Fixed transform origin: knob center (17.5px) - indicator top (6px) = 11.5px */
  transform-origin: 50% 11.5px;
  transform: translateX(-50%) rotate(var(--rotation, 0deg));
  pointer-events: none;
  z-index: 12;
  transition: all 0.15s ease;
  box-shadow: 0 1px 1px var(--overlay-shadow);
}

.pan-knob-container:hover::before {
  background: color-mix(in srgb, var(--color-chassis) 85%, var(--color-accent-warm) 15%);
}



/* Transport Bar - Distinct Hardware Strip */
.transport-controls {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 12px; /* Increased spacing */
  padding: 32px; /* Increased padding by 8px */
  /* Solid background color */
  background: var(--color-track-well);
  border-radius: 6px;
  border: 2px solid var(--color-text-primary);
}

/* Transport Buttons - Soft Rounded with Color Coding */
.transport-button {
  background: var(--color-chassis);
  color: var(--color-text-primary);
  border: 1px solid var(--color-text-primary);
  border-radius: 6px; /* Soft rounded corners */
  width: 56px;
  height: 56px;
  font-size: 16px;
  font-weight: 500;
  font-family: inherit; /* Inherit theme font */
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.15s ease;
  /* Subtle hover highlight */
  position: relative;
}

.transport-button:hover {
  background: color-mix(in srgb, var(--color-chassis) 92%, var(--color-hover-overlay) 8%);
}

.transport-button:active {
  background: color-mix(in srgb, var(--color-chassis) 96%, var(--color-active-overlay) 4%);
  transform: translateY(1px);
}

.transport-button svg {
  width: 28px;
  height: 28px;
}

/* Play Button States */
#play-btn.playing {
  background: var(--color-play);
  color: white;
  box-shadow: 0 0 8px var(--glow-play);
}

#play-btn.playing:hover {
  background: color-mix(in srgb, var(--color-play) 90%, white 10%);
}

/* Stop Button States */
#stop-btn.stopping {
  background: var(--color-stop);
  color: white;
  transition: background-color 0.05s ease;
  box-shadow: 0 0 8px var(--glow-stop);
}

/* Pause Button States */
#pause-btn.paused {
  background: var(--color-stop);
  color: white;
  transition: background-color 0.05s ease;
  box-shadow: 0 0 8px var(--glow-stop);
}

/* Record Button with Warm Orange */
.record-button {
  background: var(--color-chassis);
  border: 1px solid var(--color-text-primary);
  border-radius: 6px;
}

.record-button.recording {
  background: var(--color-record);
  color: white;
  box-shadow: 0 0 12px var(--glow-record);
}

.record-button:hover:not(.recording) {
  background: color-mix(in srgb, var(--color-chassis) 85%, var(--color-record) 15%);
}

.record-button:active {
  background: color-mix(in srgb, var(--color-chassis) 96%, var(--color-active-overlay) 4%);
  transform: translateY(1px);
}

/* Bounce Button - Golden theme for master mix */
.bounce-button {
  background: var(--color-chassis);
  border: 1px solid var(--color-text-primary);
  border-radius: 6px;
}

.bounce-button:hover {
  background: color-mix(in srgb, var(--color-chassis) 85%, var(--color-accent-warm) 15%);
}

.bounce-button:active {
  background: color-mix(in srgb, var(--color-chassis) 96%, var(--color-active-overlay) 4%);
  transform: translateY(1px);
}

.bounce-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.bounce-button:disabled:hover {
  background: var(--color-chassis);
  transform: none;
}

.clear-button {
  background: var(--color-chassis);
  border: 1px solid var(--color-text-primary);
}

.clear-button:hover {
  background: color-mix(in srgb, var(--color-chassis) 85%, var(--color-text-primary) 15%);
}

.clear-button:active {
  background: color-mix(in srgb, var(--color-chassis) 96%, var(--color-active-overlay) 4%);
  transform: translateY(1px);
}

.clear-button.clearing {
  background: var(--color-record);
  box-shadow: 0 0 8px var(--glow-record-subtle);
}

.clear-button.clearing svg {
  stroke: var(--color-chassis);
}

.bounce-button.bouncing {
  background: var(--color-accent-warm);
  box-shadow: 0 0 8px var(--glow-bounce);
}

.bounce-button.bouncing svg {
  stroke: var(--color-chassis);
}

.settings-button.opening {
  background: var(--color-accent-olive);
  box-shadow: 0 0 8px var(--glow-settings);
}

.settings-button.opening svg {
  stroke: var(--color-chassis);
}

/* Playhead */
  .playhead {
    position: absolute;
    left: 50%;
    bottom: 12px; /* More space from bottom with increased padding */
    transform: translateX(-50%); /* Perfect center alignment */
    width: 55%; /* Slightly narrower for better proportions */
    height: 48px; /* Increased height to match larger container */
    background: var(--color-track-well); /* Dark brown tape well background */
    border: 1px solid var(--color-text-primary);
    border-radius: 4px;
    box-shadow: 
      inset 0 1px 3px var(--color-shadow-inset),
      inset 0 -1px 0 var(--overlay-light);
  }

.playhead-indicator {
  position: absolute;
  top: -2px; /* Position above the playhead area */
  left: 0;
  width: 3px;
  height: calc(100% + 2px); /* Extend through entire playhead height plus overhang */
  background: var(--color-record);
  transition: left 0.1s ease;
  z-index: 10;
  border-radius: 10%;
}

/* Video editing style playhead with triangular top */
.playhead-indicator::before {
  content: '';
  position: absolute;
  top: -2px; /* Position above the line */
  left: 50%;
  transform: translateX(-50%);
  width: 0;
  height: 0;
  border-left: 8px solid transparent;
  border-right: 8px solid transparent;
  border-top: 10px solid var(--color-record);
  z-index: 11;
  border-radius: 50%;
  /* Add subtle shadow for depth */
  /* filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.2)); */
}

/* Optional: Add a small handle at the top for better grab indication */
.playhead-indicator::after {
  content: '';
  position: absolute;
  top: -2px;
  left: 50%;
  transform: translateX(-50%);
  width: 12px;
  height: 4px;
  background: var(--color-record);
  border-radius: 50%;
  z-index: 12;
}

/* Waveform Canvas - positioned above playhead indicator */
.waveform-canvas {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%; /* Full width to match playhead */
  height: 100%; /* Full height to match playhead */
  display: block;
  background: var(--waveform-overlay); /* Subtle dark overlay for waveform visibility */
  border-radius: 3px; /* Slightly smaller radius to create inset effect */
  image-rendering: pixelated;
  image-rendering: -moz-crisp-edges;
  image-rendering: crisp-edges;
  pointer-events: none; /* Allow clicks to pass through to playhead */
}

/* Display Section */
.display-section {
  display: flex;
  flex-direction: column;
  gap: 12px; /* Reduced gap to balance with other spacing */
  align-items: center;
  padding: 8px; /* Reduced padding since parent has more padding now */
  min-width: 140px; /* Match volume meter width */
}

/* Timecode Display - Theme-Specific Typography */
.timecode {
  font-family: inherit; /* Inherit theme font */
  font-weight: 500;
  letter-spacing: inherit; /* Inherit theme spacing */
  font-size: 24px;
  color: var(--color-text-primary);
  background: var(--color-chassis);
  padding: 12px 20px; /* Increased padding for better visual weight */
  border: 1px solid var(--color-text-primary);
  border-radius: 6px;
  min-width: 120px; /* Slightly wider for better proportions */
  text-align: center;
  margin-bottom: 8px; /* Add space below timecode */
  box-shadow: 
    inset 0 1px 2px var(--color-shadow-inset),
    0 1px 2px var(--overlay-subtle);
}

/* Theme-specific timecode adjustments */
:root[data-theme="indie"] .timecode {
  font-size: 16px; /* Smaller for pixel font readability */
  min-width: 140px; /* Wider for pixel font spacing */
}

:root[data-theme="disco"] .timecode {
  font-size: 26px; /* Larger for futuristic impact */
  text-transform: uppercase;
}

:root[data-theme="808"] .timecode {
  font-size: 26px; /* Bold impact for hip-hop style */
}

/* Volume Meter - Continuous Progress Bar */
.volume-meter {
  position: relative;
  height: 18px; /* Slightly taller for better proportion */
  width: 140px; /* Wider to match timecode proportions */
  padding: 3px; /* Increased padding */
  background: var(--color-track-well);
  border-radius: 3px;
  border: 1px solid var(--color-text-primary);
  margin-top: 4px; /* Add space above volume meter */
  /* Inset shadow for depth */
  box-shadow: inset 0 1px 2px var(--color-shadow-inset);
  overflow: hidden;
}

.volume-meter-fill {
  position: absolute;
  top: 0;
  left: 0;
  height: 100%;
  width: 0%;
  background: var(--color-play); /* Default green */
  border-radius: 2px;
  transition: width 0.05s ease, background-color 0.1s ease;
  /* Subtle glow effect for active levels */
  box-shadow: 0 0 3px var(--glow-volume);
  
  /* Create segmented appearance using CSS mask for clean separation */
  mask: repeating-linear-gradient(
    to right,
    black 0px,
    black 11px,            /* Width of each visible segment */
    transparent 11px,      /* Gap between segments */
    transparent 13px       /* Total width including gap */
  );
  -webkit-mask: repeating-linear-gradient(
    to right,
    black 0px,
    black 11px,
    transparent 11px,
    transparent 13px
  );
}

/* Hide the old segment-based elements - they'll be replaced by the fill bar */
.volume-meter-segment {
  display: none;
}

/* Track Controls */

/* ARM Buttons - Color Coded Record */
.arm-button {
  appearance: none;
  background: var(--color-chassis);
  border: 1px solid var(--color-text-primary);
  border-radius: 6px; /* Soft rounded corners */
  width: 32px; /* Slightly larger for better touch */
  height: 24px; /* 4pt grid aligned */
  cursor: pointer;
  position: relative;
  transition: all 0.15s ease;
}

/* Record icon for ARM buttons */
.arm-button::after {
  content: '●';
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 9px;
  font-weight: bold;
  color: var(--color-text-primary);
  pointer-events: none;
}

.arm-button:hover {
  background: color-mix(in srgb, var(--color-chassis) 85%, var(--color-record) 15%);
}

.arm-button:checked {
  background: var(--color-record);
  box-shadow: 0 0 8px var(--glow-record-subtle);
}

.arm-button:checked::after {
  color: var(--color-chassis);
}

.arm-button:active {
  background: color-mix(in srgb, var(--color-chassis) 96%, var(--color-active-overlay) 4%);
  transform: translateY(1px);
}

/* SOLO Buttons - Blue Accent */
.solo-button {
  appearance: none;
  background: var(--color-chassis);
  border: 1px solid var(--color-text-primary);
  border-radius: 6px; /* Soft rounded corners */
  width: 32px; /* Consistent with ARM buttons */
  height: 24px; /* 4pt grid aligned */
  cursor: pointer;
  position: relative;
  transition: all 0.15s ease;
  margin-top: 4px; /* 4pt grid alignment */
}

/* "S" label for solo buttons */
.solo-button::after {
  content: 'S';
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 9px;
  font-weight: 600;
  font-family: inherit; /* Inherit theme font */
  color: var(--color-text-primary);
  pointer-events: none;
  letter-spacing: 0;
}

.solo-button:hover {
  background: color-mix(in srgb, var(--color-chassis) 85%, var(--color-solo) 15%);
}

.solo-button:checked {
  background: var(--color-solo);
  box-shadow: 0 0 8px var(--glow-solo);
}

.solo-button:checked::after {
  color: var(--color-chassis);
}

.solo-button:active {
  background: color-mix(in srgb, var(--color-chassis) 96%, var(--color-active-overlay) 4%);
  transform: translateY(1px);
}

/* SPEED CONTROLS - Split Button Design */
.speed-controls {
  display: flex;
  border: 1px solid var(--color-text-primary);
  border-radius: 4px;
  overflow: hidden;
  margin-top: 4px; /* 4pt grid alignment */
}

.reverse-button {
  appearance: none;
  background: var(--color-chassis);
  color: var(--color-text-primary);
  border: none;
  border-right: 1px solid var(--color-text-primary);
  border-radius: 0;
  width: 18px;
  height: 24px;
  font-size: 12px;
  font-weight: 500;
  font-family: inherit; /* Inherit theme font */
  cursor: pointer;
  position: relative;
  transition: all 0.15s ease;
  margin: 0;
  padding: 0;
  display: flex;
  align-items: center;
  justify-content: center;
}

.half-speed-button {
  appearance: none;
  background: var(--color-chassis);
  color: var(--color-text-primary);
  border: none;
  border-radius: 0;
  width: 16px;
  height: 24px;
  font-size: 12px;
  font-weight: 600;
  font-family: 'Inter', sans-serif;
  cursor: pointer;
  position: relative;
  transition: all 0.15s ease;
  margin: 0;
  padding: 0;
  display: flex;
  align-items: center;
  justify-content: center;
}

.reverse-button:hover {
  background: color-mix(in srgb, var(--color-chassis) 85%, var(--color-accent-purple) 15%);
  color: var(--color-accent-purple);
}

.half-speed-button:hover {
  background: color-mix(in srgb, var(--color-chassis) 85%, var(--color-accent-warm) 15%);
  color: var(--color-accent-warm);
}

.reverse-button.active {
  background: var(--color-accent-purple);
  color: var(--color-chassis);
  box-shadow: inset 0 0 8px rgba(147, 51, 234, 0.3);
}

.half-speed-button.active {
  background: var(--color-accent-warm);
  color: var(--color-chassis);
  box-shadow: inset 0 0 8px rgba(209, 140, 51, 0.3);
}

.reverse-button:active {
  background: color-mix(in srgb, var(--color-chassis) 96%, var(--color-active-overlay) 4%);
  transform: translateY(1px);
}

.half-speed-button:active {
  background: color-mix(in srgb, var(--color-chassis) 96%, var(--color-active-overlay) 4%);
  transform: translateY(1px);
}

.reverse-button:disabled,
.half-speed-button:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}

.reverse-button:disabled:hover {
  background: var(--color-chassis);
  color: var(--color-text-primary);
}

.half-speed-button:disabled:hover {
  background: var(--color-chassis);
  color: var(--color-text-primary);
}

/* MUTE Button - Desaturated Clay */
.mute-button-container {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-top: 4px; /* 4pt grid alignment */
}

.mute-button {
  appearance: none;
  background: var(--color-mute); /* Desaturated clay - default lit state (unmuted) */
  border: 1px solid var(--color-text-primary);
  border-radius: 6px; /* Soft rounded corners */
  width: 32px; /* Consistent with other buttons */
  height: 32px; /* Perfect square, 4pt grid aligned */
  cursor: pointer;
  position: relative;
  transition: all 0.15s ease;
  margin: 0;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}

.mute-button:hover:not(:checked) {
  background: color-mix(in srgb, var(--color-mute) 85%, var(--color-text-primary) 15%);
}

.mute-button:checked {
  background: var(--color-chassis); /* Light state (muted) */
  box-shadow: 
    inset 0 1px 2px var(--color-shadow-inset),
    0 1px 2px rgba(0, 0, 0, 0.05);
}

.mute-button:checked:hover {
  background: color-mix(in srgb, var(--color-chassis) 92%, var(--color-text-primary) 8%);
}

.mute-button:active {
  background: color-mix(in srgb, var(--color-mute) 96%, var(--color-active-overlay) 4%);
  transform: translateY(1px);
}

.mute-button:checked:active {
  background: color-mix(in srgb, var(--color-chassis) 96%, var(--color-active-overlay) 4%);
  transform: translateY(1px);
}

.mute-button-label {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-weight: 600;
  font-family: 'Inter', sans-serif;
  letter-spacing: 0.02em;
  color: var(--color-text-primary);
  font-size: 11px;
  pointer-events: none;
  z-index: 1;
}

/* Settings Modal */
.settings-modal {
  background: rgba(50, 40, 25, 0.5);
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 1000;
}

.settings-content {
  background: var(--panel);
  border: 1px solid var(--ink);
  border-radius: 8px;
  padding: 32px;
  max-width: 400px;
  width: 90%;
}

.settings-title {
  font-size: 24px;
  font-weight: 600;
  font-family: 'Space Mono', monospace;
  letter-spacing: 2px;
  color: var(--ink);
  margin-bottom: 24px;
  text-align: center;
}

.settings-subtitle {
  font-size: 16px;
  font-weight: 500;
  font-family: 'Space Mono', monospace;
  letter-spacing: 1px;
  color: var(--ink);
  margin-bottom: 12px;
}

.settings-group {
  margin-bottom: 24px;
}

.settings-label {
  display: block;
  font-weight: 400;
  font-family: 'Space Mono', monospace;
  letter-spacing: 1px;
  color: var(--ink);
  margin-bottom: 8px;
}

.settings-select {
  background: var(--paper);
  border: 1px solid var(--ink);
  border-radius: 4px;
  padding: 8px;
  width: 100%;
  color: var(--ink);
  font-family: 'Space Mono', monospace;
  font-size: 14px;
}

.scan-devices-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 12px;
  margin-top: 8px;
  background: var(--panel);
  border: 1px solid var(--ink);
  border-radius: 4px;
  color: var(--ink);
  font-size: 12px;
  font-family: 'Space Mono', monospace;
  cursor: pointer;
  transition: all 0.2s ease;
}

.scan-devices-btn:hover {
  background: var(--track);
}

.scan-devices-btn:active {
  transform: translateY(1px);
}

.scan-output-devices-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 12px;
  margin-top: 8px;
  background: var(--panel);
  border: 1px solid var(--ink);
  border-radius: 4px;
  color: var(--ink);
  font-size: 12px;
  font-family: 'Space Mono', monospace;
  cursor: pointer;
  transition: all 0.2s ease;
}

.scan-output-devices-btn:hover {
  background: var(--track);
}

.scan-output-devices-btn:active {
  transform: translateY(1px);
}

.close-settings-btn {
  background: var(--track);
  color: var(--paper);
  border: 1px solid var(--ink);
  border-radius: 4px;
  padding: 8px 16px;
  font-weight: 500;
  font-family: 'Space Mono', monospace;
  letter-spacing: 1px;
  cursor: pointer;
  margin-top: 24px;
  width: 100%;
}

.close-settings-btn:hover {
  /* No hover effect */
}

.close-settings-btn:active {
  background: color-mix(in srgb, var(--track) 96%, black 4%);
  transform: translateY(1px);
}

.settings-checkbox:checked::after {
  content: '✓';
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  color: var(--paper);
  font-size: 10px;
  font-weight: bold;
}

.settings-toggle-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  cursor: pointer;
  padding: 4px 0;
  border-radius: 4px;
  transition: background-color 0.2s ease;
}

.settings-toggle-header:hover {
  background-color: color-mix(in srgb, var(--paper) 95%, var(--ink) 5%);
}

.toggle-arrow {
  transition: transform 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
}

.toggle-arrow.rotated {
  transform: rotate(180deg);
}

.checkbox-group {
  display: flex;
  flex-direction: column;
  gap: 8px;
  overflow: hidden;
  transition: max-height 0.3s ease, opacity 0.3s ease;
  max-height: 200px;
  opacity: 1;
}

.checkbox-group.collapsed {
  max-height: 0;
  opacity: 0;
}

/* Audio Content Section */
.audio-content {
  display: block;
  overflow: hidden;
  transition: max-height 0.3s ease, opacity 0.3s ease;
  max-height: 400px;
  opacity: 1;
  margin-top: 12px;
}

.audio-content.collapsed {
  max-height: 0;
  opacity: 0;
}

.audio-input-section {
  margin-bottom: 20px;
  padding-bottom: 16px;
}

.audio-output-section {
  margin-bottom: 20px;
  padding-bottom: 16px;
  border-bottom: 1px solid color-mix(in srgb, var(--ink) 20%, transparent 80%);
}

.audio-processing-section {
  margin-top: 16px;
}

.processing-subtitle {
  font-size: 14px;
  font-weight: 500;
  font-family: 'Space Mono', monospace;
  letter-spacing: 0.5px;
  color: var(--ink);
  margin-bottom: 12px;
  opacity: 0.8;
}

.keyboard-shortcuts-table {
  display: block;
  overflow: hidden;
  transition: max-height 0.3s ease, opacity 0.3s ease;
  max-height: 400px;
  opacity: 1;
  margin-top: 12px;
}

.keyboard-shortcuts-table.collapsed {
  max-height: 0;
  opacity: 0;
}

.shortcuts-table {
  width: 100%;
  border-collapse: collapse;
  font-family: 'Space Mono', monospace;
  font-size: 13px;
  background: var(--paper);
  border: 1px solid var(--ink);
  border-radius: 4px;
  overflow: hidden;
}

.shortcuts-table th {
  background: var(--track);
  color: #DCCDB7;
  padding: 8px 12px;
  text-align: left;
  font-weight: 600;
  border-bottom: 1px solid var(--ink);
}

.shortcuts-table td {
  padding: 6px 12px;
  border-bottom: 1px solid color-mix(in srgb, var(--ink) 20%, transparent 80%);
  color: #DCCDB7;
}

.shortcuts-table td:nth-child(2) {
  color: #6B4F33;
}

.shortcuts-table tbody tr:last-child td {
  border-bottom: none;
}

.shortcuts-table tbody tr:hover {
  background: color-mix(in srgb, var(--accent) 10%, transparent 90%);
}

.shortcuts-table kbd {
  background: var(--track);
  color: #DCCDB7;
  padding: 2px 6px;
  border-radius: 3px;
  border: 1px solid var(--ink);
  font-family: 'Space Mono', monospace;
  font-size: 11px;
  font-weight: 600;
  min-width: 20px;
  display: inline-block;
  text-align: center;
}

.checkbox-label {
  display: flex;
  align-items: center;
  gap: 8px;
  font-family: 'Space Mono', monospace;
  font-size: 14px;
  color: var(--ink);
  cursor: pointer;
}

.settings-checkbox {
  appearance: none;
  width: 16px;
  height: 16px;
  border: 1px solid var(--ink);
  border-radius: 2px;
  background: var(--paper);
  cursor: pointer;
  position: relative;
}

.settings-checkbox:checked {
  background: var(--track);
}

.display-row {
  display: flex;
  flex-direction: column;
  align-items: center;
  width: 100%;
  margin-bottom: 16px;
  gap: 8px;
}

.volume-meter-fill {
  background: var(--accent);
  height: 100%;
  width: 0%;
  transition: width 0.1s ease;
  border-radius: 4px;
}

/* Main Layout */
.mixer-section {
  background: var(--panel);
  border-radius: 8px;
  padding: 0;
  border: 1px solid var(--ink);
}

/* Track Container - Improved Spacing */
.tracks-container {
  display: flex;
  gap: 16px; /* Increased gap by 8px */
  padding: 24px; /* Increased padding by 8px */
  background: var(--color-control-surface);
  border-radius: 6px;
  border: 1px solid var(--color-text-primary);
  align-items: flex-start;
  box-shadow: 
    inset 0 1px 0 rgba(255, 255, 255, 0.1),
    0 1px 2px rgba(0, 0, 0, 0.05);
}

.track {
  display: flex;
  flex-direction: row;
  align-items: stretch;
  gap: 8px;
  padding: 8px;
  min-height: 220px;
}

.track-controls {
  display: flex;
  flex-direction: column;
  gap: 4px;
  align-items: center;
  justify-content: flex-start;
  padding-top: 6px;
  width: 42px;
}

.fader-section, .master-fader-section {
  display: flex;
  flex-direction: row;
  align-items: stretch;
  gap: 6px;
}

.fader-markings {
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  align-items: flex-start;
  padding: 8px 0;
  min-height: 180px;
  width: 25px;
  position: relative;
}

/* Fader Markings - Clean Layout */
.marking {
  font-size: 10px;
  font-family: 'Inter', sans-serif;
  font-weight: 500;
  color: var(--color-text-primary);
  line-height: 1;
  white-space: nowrap;
  position: absolute;
  left: 0;
  letter-spacing: 0.02em;
  margin-left: 5px;
}

/* Dash markings for visual separation */
.marking.dash {
  font-size: 8px;
  font-weight: 400;
  opacity: 0.5;
  color: var(--color-text-primary);
}

/* Position markings for clean visual layout - evenly distributed */
.marking[data-db="0"] {
  top: 40px; /* 0 dB aligned with 80% fader position */
  font-weight: 600;
  color: var(--track); /* Changed from orange to brown to match theme */
}

.marking.dash:nth-of-type(2) {
  top: 65px; /* First dash */
}

.marking[data-db="-12"] {
  top: 90px; /* -12 dB */
  font-weight: 500;
}

.marking.dash:nth-of-type(4) {
  top: 115px; /* Second dash */
}

.marking[data-db="-36"] {
  top: 140px; /* -36 dB */
  font-weight: 500;
}

.marking.dash:nth-of-type(6) {
  top: 155px; /* Third dash */
}

.marking[data-db="-60"] {
  top: 170px; /* -60 dB at bottom */
  font-weight: 500;
}

/* Master section layout updates */
.master-section {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  padding: 8px;
  min-height: 220px;
}

.master-controls {
  display: flex;
  flex-direction: row;
  align-items: stretch;
  gap: 8px;
}

.master-label-vertical {
  display: flex;
  flex-direction: row;
  align-items: stretch;
  gap: 6px;
  height: 180px;
  justify-content: flex-start;
}

/* Master Section Divider */
.master-divider {
  width: 2px;
  height: 100%;
  background: var(--divider);
  border: none;
  font-size: 0;
  writing-mode: horizontal-tb;
  display: block;
  border-radius: 1px;
}

/* Master Fader Label - Centered Typography */
.master-text {
  display: flex;
  flex-direction: column;
  gap: 4px; /* 4pt grid aligned */
  font-size: 10px;
  font-family: 'Inter', sans-serif;
  color: var(--color-text-primary);
  font-weight: 600;
  writing-mode: horizontal-tb;
  height: 100%;
  justify-content: center; /* Better center alignment */
  align-items: center;
  min-width: 16px; /* 4pt grid aligned */
  letter-spacing: 0.05em;
}

.master-text div {
  line-height: 1;
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Remove the old master-label class */
.master-label {
  display: none;
}

/* Remove any remaining gradients and shadows */
.tape-four {
  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.08);
}

/* Clean up any remaining old styles */

/* Tips section styling */
.tips-content {
  padding: 12px 0;
  overflow: hidden;
  transition: max-height 0.3s ease, opacity 0.3s ease;
  max-height: 200px;
  opacity: 1;
}

.tips-content.collapsed {
  max-height: 0;
  opacity: 0;
  padding: 0;
}

.tip-item {
  font-size: 14px;
  color: var(--color-text-primary);
  margin: 8px 0;
  font-family: 'Inter', sans-serif;
  font-weight: 400;
}

/* =============================================================================
   TAPEFOUR DESIGN SYSTEM SUMMARY
   ============================================================================= 

   🎨 COLOR PALETTE:
   - HSL-based semantic color system with 1970s tape machine aesthetics
   - Primary: Warm camel-brown chassis (#DCCDB7)
   - Accents: Burnt orange (#D18C33) and muted olive tones
   - Functional colors: Record (warm orange), Solo (blue), Mute (clay)

   🎚️ CONTROLS:
   - 6px soft-rounded corners throughout
   - Subtle hover states with 8% overlay
   - Color-coded buttons (REC=orange, SOLO=blue, MUTE=clay)
   - Inner shadows on fader tracks for hardware depth

   📏 LAYOUT & SPACING:
   - 4pt grid system for consistent vertical rhythm
   - 8px increased padding throughout for better breathing room
   - Enhanced visual hierarchy with distinct transport bar

   🔤 TYPOGRAPHY:
   - IBM Plex Mono for titles and displays (rounded grotesk)
   - Inter for UI labels and controls (semi-bold sans)
   - Consistent letter-spacing for readability

   📊 VOLUME METERS:
   - 2px wide bars with 1px gaps
   - Animated fill with scaleY transform
   - Color-coded levels (green → amber → red)

   🎭 VINTAGE TOUCHES:
   - Coarse paper grain overlay at 4% opacity
   - Hardware-style inset borders on panels
   - Authentic analogue equipment aesthetics

   ============================================================================= */

/* Error Modal Styling */
.error-message {
  color: var(--color-text-primary);
  font-size: 16px;
  line-height: 1.5;
  text-align: center;
  padding: 20px 0;
  margin: 0;
  background: var(--color-control-surface);
  border-radius: 6px;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
}

/* Warning Modal Styling */
.warning-message {
  color: var(--color-text-primary);
  font-size: 16px;
  line-height: 1.5;
  padding: 16px 0;
  margin: 0 0 16px 0;
  background: var(--color-control-surface);
  border-radius: 6px;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
}

.warning-checkbox-label {
  margin: 16px 0 !important;
  padding: 8px 0;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
}

.warning-buttons {
  display: flex;
  gap: 12px;
  justify-content: flex-end;
  padding-top: 16px;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
}

.warning-cancel-btn {
  background: var(--color-control-surface) !important;
  color: var(--color-text-primary) !important;
  border: 1px solid rgba(0, 0, 0, 0.2) !important;
}

.warning-cancel-btn:hover {
  background: var(--color-hover-overlay) !important;
}

.warning-continue-btn {
  background: var(--color-accent-warm) !important;
  color: white !important;
  border: 1px solid var(--color-accent-warm) !important;
}

.warning-continue-btn:hover {
  background: var(--color-accent-olive) !important;
  border-color: var(--color-accent-olive) !important;
}



/* ========================================== */
/* ===== TASCAM 424 MKII THEME OVERRIDES ===== */
/* ========================================== */

/* Transport Button Styling for Indie Theme - TASCAM Professional */
:root[data-theme="indie"] .transport-button {
  background: linear-gradient(145deg, hsl(0, 0%, 92%), hsl(0, 0%, 82%));
  /* border: 2px solid hsl(0, 0%, 70%); */
  color: hsl(0, 0%, 25%);
  box-shadow: 
    0 2px 4px rgba(0, 0, 0, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.8);
  font-weight: 600;
}

:root[data-theme="indie"] .transport-button:hover {
  background: linear-gradient(145deg, hsl(0, 0%, 95%), hsl(0, 0%, 85%));
  border-color: hsl(0, 0%, 65%);
  color: hsl(0, 0%, 20%);
  box-shadow: 
    0 3px 6px rgba(0, 0, 0, 0.12),
    inset 0 1px 0 rgba(255, 255, 255, 0.9);
}

:root[data-theme="indie"] .transport-button:active {
  background: linear-gradient(145deg, hsl(0, 0%, 78%), hsl(0, 0%, 88%));
  box-shadow: 
    inset 0 2px 4px rgba(0, 0, 0, 0.15),
    0 1px 2px rgba(0, 0, 0, 0.05);
  transform: translateY(1px);
}

/* Record Button - Red Circle in Center */
:root[data-theme="indie"] #record-btn {
  position: relative;
}

:root[data-theme="indie"] #record-btn::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 24px;
  height: 24px;
  background: hsl(0, 80%, 55%);
  border-radius: 50%;
  box-shadow: 
    0 1px 3px rgba(0, 0, 0, 0.3),
    inset 0 1px 0 rgba(255, 255, 255, 0.2);
}

:root[data-theme="indie"] #record-btn svg {
  display: none; /* Hide the SVG icon since we're using the red circle */
}

/* Pressed Down Effect for Active States */
:root[data-theme="indie"] #play-btn.playing,
:root[data-theme="indie"] #record-btn.recording,
:root[data-theme="indie"] #pause-btn.paused,
:root[data-theme="indie"] #stop-btn.stopping {
  background: linear-gradient(145deg, hsl(0, 0%, 75%), hsl(0, 0%, 85%));
  box-shadow: 
    inset 0 3px 6px rgba(0, 0, 0, 0.2),
    0 1px 2px rgba(0, 0, 0, 0.05);
  transform: translateY(2px);
  border-color: hsl(0, 0%, 60%);
}

/* Record button red circle stays visible when recording */
:root[data-theme="indie"] #record-btn.recording::before {
  background: hsl(0, 85%, 50%);
  box-shadow: 
    0 0 8px rgba(220, 38, 38, 0.4),
    inset 0 1px 0 rgba(255, 255, 255, 0.3);
}

/* Other Button Active States - Pressed Down Effect */
:root[data-theme="indie"] .bounce-button.bouncing,
:root[data-theme="indie"] .clear-button.clearing,
:root[data-theme="indie"] .settings-button.opening {
  background: linear-gradient(145deg, hsl(0, 0%, 75%), hsl(0, 0%, 85%));
  box-shadow: 
    inset 0 3px 6px rgba(0, 0, 0, 0.2),
    0 1px 2px rgba(0, 0, 0, 0.05);
  transform: translateY(2px);
  border-color: hsl(0, 0%, 60%);
}

/* Remove any color overrides for button icons in active states */
:root[data-theme="indie"] .bounce-button.bouncing svg,
:root[data-theme="indie"] .clear-button.clearing svg,
:root[data-theme="indie"] .settings-button.opening svg {
  stroke: hsl(0, 0%, 25%); /* Keep dark text color */
}

/* Professional steel blue track controls - Flat */
:root[data-theme="indie"] .arm-button:checked {
  background: hsl(15, 80%, 50%);
  border-color: hsl(15, 90%, 40%);
}

:root[data-theme="indie"] .solo-button:checked {
  background: hsl(45, 90%, 50%);
  border-color: hsl(45, 100%, 40%);
  color: hsl(45, 30%, 15%);
}

/* Fader styling for professional look - Flat */
:root[data-theme="indie"] .fader {
  background: hsl(200, 30%, 45%);
}

:root[data-theme="indie"] .master-fader {
  background: hsl(200, 30%, 45%);
}

/* Professional knob styling - Flat */
:root[data-theme="indie"] .pan-knob-container::before {
  background: hsl(200, 25%, 55%);
  border: 2px solid hsl(200, 35%, 35%);
}

/* Settings modal styling for professional look - Flat */
:root[data-theme="indie"] .settings-content {
  background: hsl(200, 35%, 53%);
  border: 1px solid hsl(200, 40%, 40%);
}

:root[data-theme="indie"] .settings-select,
:root[data-theme="indie"] .scan-devices-btn,
:root[data-theme="indie"] .close-settings-btn {
  background: hsl(200, 30%, 45%);
  border: 1px solid hsl(200, 35%, 35%);
  color: hsl(200, 15%, 85%);
}

/* Disco theme - use bright text */
:root[data-theme="disco"] .close-settings-btn {
  color: var(--color-text-primary);
}

/* 808 theme - use vintage label text */
:root[data-theme="808"] .close-settings-btn {
  color: var(--color-text-primary);
}

/* Dark theme - use light text */
:root[data-theme="dark"] .close-settings-btn {
  color: var(--color-text-primary);
}

/* ===== DISCO THEME ROUNDED BORDERS ===== */
/* Make all borders more rounded for disco theme only */
:root[data-theme="disco"] .recorder-container {
  border-radius: 20px;
}

:root[data-theme="disco"] .cassette-display {
  border-radius: 18px;
}

:root[data-theme="disco"] .mixer-section {
  border-radius: 16px;
}

:root[data-theme="disco"] .tracks-container {
  border-radius: 14px;
}

:root[data-theme="disco"] .transport-button,
:root[data-theme="disco"] .record-button,
:root[data-theme="disco"] .bounce-button,
:root[data-theme="disco"] .clear-button {
  border-radius: 12px;
}

:root[data-theme="disco"] .playhead {
  border-radius: 10px;
}

/* ===== THEME-BASED REEL SWITCHING ===== */

/* Default (Vintage) theme - show vintage reels, hide others */
:root .vintage-reel,
:root[data-theme="vintage"] .vintage-reel {
  display: block;
}

:root .indie-reel,
:root[data-theme="vintage"] .indie-reel {
  display: none;
}

:root .disco-reel,
:root[data-theme="vintage"] .disco-reel {
  display: none;
}

:root .turntable-reel,
:root[data-theme="vintage"] .turntable-reel {
  display: none;
}

:root .portal-reel,
:root[data-theme="vintage"] .portal-reel {
  display: none;
}

:root .radial-bars,
:root[data-theme="vintage"] .radial-bars {
  display: none;
}

:root .vintage-hub,
:root[data-theme="vintage"] .vintage-hub {
  display: block;
}

:root .indie-hub,
:root[data-theme="vintage"] .indie-hub {
  display: none;
}

:root .disco-hub,
:root[data-theme="vintage"] .disco-hub {
  display: none;
}

:root .turntable-hub,
:root[data-theme="vintage"] .turntable-hub {
  display: none;
}

:root .portal-hub,
:root[data-theme="vintage"] .portal-hub {
  display: none;
}

:root .radial-hub,
:root[data-theme="vintage"] .radial-hub {
  display: none;
}

/* Indie theme - show indie reels, hide others */
:root[data-theme="indie"] .vintage-reel {
  display: none;
}

:root[data-theme="indie"] .indie-reel {
  display: block;
}

:root[data-theme="indie"] .disco-reel {
  display: none;
}

:root[data-theme="indie"] .turntable-reel {
  display: none;
}

:root[data-theme="indie"] .portal-reel {
  display: none;
}

:root[data-theme="indie"] .radial-bars {
  display: none;
}

:root[data-theme="indie"] .vintage-hub {
  display: none;
}

:root[data-theme="indie"] .indie-hub {
  display: block;
}

:root[data-theme="indie"] .disco-hub {
  display: none;
}

:root[data-theme="indie"] .turntable-hub {
  display: none;
}

:root[data-theme="indie"] .portal-hub {
  display: none;
}

:root[data-theme="indie"] .radial-hub {
  display: none;
}

/* Disco theme - show neon reels, hide others */
:root[data-theme="disco"] .vintage-reel {
  display: none;
}

:root[data-theme="disco"] .indie-reel {
  display: none;
}

:root[data-theme="disco"] .disco-reel {
  display: block;
}

:root[data-theme="disco"] .turntable-reel {
  display: none;
}

:root[data-theme="disco"] .portal-reel {
  display: none;
}

:root[data-theme="disco"] .radial-bars {
  display: none;
}

:root[data-theme="disco"] .vintage-hub {
  display: none;
}

:root[data-theme="disco"] .indie-hub {
  display: none;
}

:root[data-theme="disco"] .disco-hub {
  display: block;
}

:root[data-theme="disco"] .turntable-hub {
  display: none;
}

:root[data-theme="disco"] .portal-hub {
  display: none;
}

:root[data-theme="disco"] .radial-hub {
  display: none;
}

/* ===== DISCO NEON REEL STYLING ===== */

/* Circular shadow for cassette display in disco theme */
:root[data-theme="disco"] .cassette-display {
  box-shadow: 
    inset 0 0 20px var(--color-shadow-inset),
    inset 0 0 40px hsla(340, 100%, 70%, 0.1),
    0 0 30px hsla(180, 100%, 60%, 0.2);
  border-radius: 50px;
}

/* Remove square pseudo-element backgrounds from reels in disco theme */
:root[data-theme="disco"] .tape-reel::before,
:root[data-theme="disco"] .tape-reel::after {
  display: none;
}

/* Make reel base transparent for pure neon effect */
:root[data-theme="disco"] .reel-base {
  fill: transparent !important;
}

/* Neon glow effects for disco reels */
:root[data-theme="disco"] .disco-reel {
  /* filter: drop-shadow(0 0 8px hsl(340, 100%, 70%)) drop-shadow(0 0 15px hsl(180, 100%, 60%)); */
}

/* Enhanced neon ring animations */
:root[data-theme="disco"] .neon-ring-outer {
  stroke: hsl(180, 100%, 75%);
  filter: drop-shadow(0 0 4px hsl(180, 100%, 80%)) drop-shadow(0 0 8px hsl(180, 100%, 60%));
  animation: neonPulse 3s ease-in-out infinite alternate;
}

:root[data-theme="disco"] .neon-ring-mid {
  stroke: hsl(320, 100%, 70%);
  filter: drop-shadow(0 0 3px hsl(320, 100%, 80%)) drop-shadow(0 0 6px hsl(320, 100%, 60%));
  animation: neonPulse 2.5s ease-in-out infinite alternate-reverse;
}

:root[data-theme="disco"] .neon-ring-inner {
  stroke: hsl(280, 100%, 80%);
  filter: drop-shadow(0 0 2px hsl(280, 100%, 90%)) drop-shadow(0 0 4px hsl(280, 100%, 70%));
  animation: neonPulse 2s ease-in-out infinite alternate;
}

:root[data-theme="disco"] .neon-plate {
  stroke: hsl(340, 100%, 75%);
  filter: drop-shadow(0 0 6px hsl(340, 100%, 80%)) drop-shadow(0 0 12px hsl(340, 100%, 60%));
  animation: neonGlow 4s ease-in-out infinite alternate;
}

:root[data-theme="disco"] .disco-hub {
  filter: drop-shadow(0 0 4px hsl(340, 100%, 85%)) drop-shadow(0 0 8px hsl(340, 100%, 70%));
  animation: neonPulse 1.5s ease-in-out infinite alternate;
}

/* Neon pulsing animations */
@keyframes neonPulse {
  0% {
    opacity: 0.6;
    stroke-width: 0.5;
  }
  100% {
    opacity: 1;
    stroke-width: 1;
  }
}

@keyframes neonGlow {
  0% {
    opacity: 0.3;
    stroke-width: 1;
  }
  50% {
    opacity: 0.6;
    stroke-width: 1.5;
  }
  100% {
    opacity: 0.4;
    stroke-width: 1.2;
  }
}

/* Enhanced spinning animation for disco reels */
:root[data-theme="disco"] .tape-reel.spinning .disco-reel {
  transform-origin: 52px 52px;
  animation: discoReelSpin 2.5s linear infinite;
}

@keyframes discoReelSpin {
  from {
    transform: rotate(0deg);
    filter: drop-shadow(0 0 8px hsl(340, 100%, 70%)) drop-shadow(0 0 15px hsl(180, 100%, 60%));
  }
  25% {
    filter: drop-shadow(0 0 10px hsl(320, 100%, 75%)) drop-shadow(0 0 18px hsl(280, 100%, 65%));
  }
  50% {
    filter: drop-shadow(0 0 12px hsl(280, 100%, 80%)) drop-shadow(0 0 20px hsl(340, 100%, 70%));
  }
  75% {
    filter: drop-shadow(0 0 10px hsl(180, 100%, 75%)) drop-shadow(0 0 18px hsl(320, 100%, 65%));
  }
  to {
    transform: rotate(360deg);
    filter: drop-shadow(0 0 8px hsl(340, 100%, 70%)) drop-shadow(0 0 15px hsl(180, 100%, 60%));
  }
}

/* Other themes - hide disco reels */
:root[data-theme="future"] .disco-reel,
:root[data-theme="808"] .disco-reel {
  display: none;
}

:root[data-theme="future"] .disco-hub,
:root[data-theme="808"] .disco-hub {
  display: none;
}

/* Dark theme - show radial bars, hide other reels */
:root[data-theme="dark"] .vintage-reel,
:root[data-theme="dark"] .indie-reel,
:root[data-theme="dark"] .disco-reel,
:root[data-theme="dark"] .turntable-reel {
  display: none;
}

:root[data-theme="dark"] .vintage-hub,
:root[data-theme="dark"] .indie-hub,
:root[data-theme="dark"] .disco-hub,
:root[data-theme="dark"] .turntable-hub {
  display: none;
}

:root[data-theme="dark"] .radial-bars {
  display: block;
}

:root[data-theme="dark"] .radial-hub {
  display: block;
}

/* 808 theme - show turntable reels, hide others */
:root[data-theme="808"] .vintage-reel,
:root[data-theme="808"] .indie-reel,
:root[data-theme="808"] .disco-reel,
:root[data-theme="808"] .portal-reel {
  display: none;
}

:root[data-theme="808"] .radial-bars {
  display: none;
}

:root[data-theme="808"] .vintage-hub,
:root[data-theme="808"] .indie-hub,
:root[data-theme="808"] .disco-hub,
:root[data-theme="808"] .portal-hub {
  display: none;
}

:root[data-theme="808"] .radial-hub {
  display: none;
}

:root[data-theme="808"] .turntable-reel {
  display: block;
}

:root[data-theme="808"] .turntable-hub {
  display: block;
}

/* ===== 808 TURNTABLE STYLING ===== */

/* Enhanced turntable record styling for 808 theme */
:root[data-theme="808"] .turntable-reel {
  filter: drop-shadow(0 4px 8px hsla(0, 0%, 0%, 0.5));
}

:root[data-theme="808"] .vinyl-record {
  fill: hsl(0, 0%, 8%);
  stroke: hsl(0, 0%, 15%);
  filter: drop-shadow(0 2px 4px hsla(0, 0%, 0%, 0.3));
}

:root[data-theme="808"] .record-groove {
  stroke: hsl(0, 0%, 12%);
  filter: drop-shadow(0 1px 2px hsla(0, 0%, 0%, 0.2));
}

:root[data-theme="808"] .record-label {
  fill: hsl(20, 100%, 55%);
  stroke: hsl(20, 100%, 45%);
  filter: drop-shadow(0 2px 4px hsla(20, 100%, 30%, 0.4));
}

:root[data-theme="808"] .label-ring {
  stroke: hsl(20, 80%, 40%);
}

:root[data-theme="808"] .label-text {
  fill: hsl(45, 100%, 85%);
  font-family: 'IBM Plex Mono', monospace;
  font-weight: bold;
  text-shadow: 0 1px 2px hsla(0, 0%, 0%, 0.5);
}

:root[data-theme="808"] .turntable-hub {
  fill: hsl(0, 0%, 5%);
  stroke: hsl(0, 0%, 20%);
  filter: drop-shadow(0 1px 2px hsla(0, 0%, 0%, 0.4));
}

/* DJ-style spinning animation for 808 turntables */
:root[data-theme="808"] .tape-reel.spinning .turntable-reel {
  transform-origin: 52px 52px;
  animation: turntableSpin 1.8s linear infinite;
}

@keyframes turntableSpin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

/* ===== DARK THEME RADIAL BARS STYLING ===== */

/* Hi-tech dashboard loading spinner style */
:root[data-theme="dark"] .radial-bars {
  filter: drop-shadow(0 2px 4px hsla(0, 0%, 0%, 0.4));
}

:root[data-theme="dark"] .radial-bar {
  fill: hsl(215, 15%, 40%);
  transition: fill 0.3s ease;
}

:root[data-theme="dark"] .radial-hub {
  fill: hsl(215, 15%, 25%);
  stroke: hsl(215, 15%, 45%);
  filter: drop-shadow(0 0 2px hsl(215, 15%, 60%));
}

/* Spinning animation for radial bars */
:root[data-theme="dark"] .tape-reel.spinning .radial-bars {
  transform-origin: 52px 52px;
  animation: radialSpin 2s linear infinite;
}

/* Individual bar fade animation during spinning */
:root[data-theme="dark"] .tape-reel.spinning .radial-bar {
  animation: barFade 1.6s ease-in-out infinite;
}

/* Stagger the bar animations for wave effect */
:root[data-theme="dark"] .tape-reel.spinning .radial-bar:nth-child(1) {
  animation-delay: 0ms;
}

:root[data-theme="dark"] .tape-reel.spinning .radial-bar:nth-child(2) {
  animation-delay: 200ms;
}

:root[data-theme="dark"] .tape-reel.spinning .radial-bar:nth-child(3) {
  animation-delay: 400ms;
}

:root[data-theme="dark"] .tape-reel.spinning .radial-bar:nth-child(4) {
  animation-delay: 600ms;
}

:root[data-theme="dark"] .tape-reel.spinning .radial-bar:nth-child(5) {
  animation-delay: 800ms;
}

:root[data-theme="dark"] .tape-reel.spinning .radial-bar:nth-child(6) {
  animation-delay: 1000ms;
}

:root[data-theme="dark"] .tape-reel.spinning .radial-bar:nth-child(7) {
  animation-delay: 1200ms;
}

:root[data-theme="dark"] .tape-reel.spinning .radial-bar:nth-child(8) {
  animation-delay: 1400ms;
}

/* Animation keyframes */
@keyframes radialSpin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

@keyframes barFade {
  0% {
    fill: hsl(215, 15%, 25%);
    opacity: 0.3;
  }
  50% {
    fill: hsl(215, 40%, 60%);
    opacity: 0.9;
  }
  100% {
    fill: hsl(215, 15%, 25%);
    opacity: 0.3;
  }
}

/* ===== ENHANCED CASSETTE TAPE STYLING ===== */

/* Improved cassette reel depth and realism for indie theme */
:root[data-theme="indie"] .indie-reel {
  filter: drop-shadow(0 2px 4px hsla(200, 50%, 20%, 0.3));
}

:root[data-theme="indie"] .reel-base {
  fill: var(--color-track-well);
  filter: drop-shadow(inset 0 2px 4px hsla(200, 50%, 15%, 0.4));
}

:root[data-theme="indie"] .reel-rim {
  fill: none;
  stroke: var(--color-divider);
  stroke-width: 1.5;
  filter: drop-shadow(0 1px 2px hsla(200, 40%, 25%, 0.5));
}

:root[data-theme="indie"] .indie-hub {
  fill: var(--color-reel-hub);
  filter: drop-shadow(0 1px 3px hsla(200, 50%, 15%, 0.6));
}

/* Add subtle texture to cassette reels */
:root[data-theme="indie"] .tape-reel::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: radial-gradient(
    circle at 30% 30%,
    hsla(200, 20%, 80%, 0.1) 0%,
    hsla(200, 30%, 60%, 0.05) 40%,
    hsla(200, 40%, 40%, 0.1) 100%
  );
  border-radius: 50%;
  pointer-events: none;
}

/* Use the same reliable spinning animation for indie reels */
:root[data-theme="indie"] .tape-reel.spinning .indie-reel {
  transform-origin: 52px 52px; /* Center the rotation on the reel center */
  animation: indieReelSpin 3s linear infinite;
}

/* Subtle rim lighting for 3D effect */
:root[data-theme="indie"] .reel-rim {
  stroke: hsl(200, 30%, 70%);
  stroke-width: 1;
  fill: none;
  filter: drop-shadow(0 1px 2px hsla(200, 40%, 30%, 0.3));
}

@keyframes indieReelSpin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

/* Professional cassette hub styling */
:root[data-theme="indie"] .indie-hub {
  fill: linear-gradient(135deg, 
    hsl(200, 35%, 45%) 0%,
    hsl(200, 40%, 35%) 50%,
    hsl(200, 45%, 25%) 100%);
}

/* Precision engineering look for hole patterns */
:root[data-theme="indie"] .indie-reel {
  fill: var(--color-reel-mid);
  stroke: var(--color-reel-dark);
  stroke-width: 0.5;
}



/* Enhanced cassette reel surface texture */
:root[data-theme="indie"] .left-reel .indie-reel {
  fill: url(#cassette-gradient);
}

:root[data-theme="indie"] .right-reel .indie-reel {
  fill: url(#cassette-gradient-right);
}

/* Add a subtle gradient for the cassette surface */
:root[data-theme="indie"] .tape-reel::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: conic-gradient(
    from 0deg,
    hsla(200, 30%, 65%, 0.1) 0deg,
    hsla(200, 40%, 60%, 0.15) 60deg,
    hsla(200, 35%, 70%, 0.08) 120deg,
    hsla(200, 45%, 55%, 0.12) 180deg,
    hsla(200, 30%, 65%, 0.1) 240deg,
    hsla(200, 40%, 60%, 0.15) 300deg,
    hsla(200, 30%, 65%, 0.1) 360deg
  );
  border-radius: 50%;
  pointer-events: none;
}

/* ===== THEME SELECTOR COMPONENT ===== */
.theme-selector {
  background: var(--color-chassis);
  border: 1px solid var(--color-text-primary);
  border-radius: 8px;
  padding: 12px 16px;
  font-family: inherit;
  font-size: 13px;
  font-weight: 500;
  color: var(--color-text-primary);
  transition: all 0.2s ease;
  white-space: nowrap;
  display: flex;
  align-items: center;
  gap: 0;
}

.theme-selector:hover {
  background: color-mix(in srgb, var(--color-chassis) 92%, var(--color-hover-overlay) 8%);
  transform: translateY(-1px);
  box-shadow: 0 2px 4px var(--overlay-shadow);
}

.theme-option {
  background: none;
  border: none;
  font-family: inherit;
  font-size: inherit;
  color: inherit;
  cursor: pointer;
  transition: all 0.2s ease;
  opacity: 0.6;
  padding: 4px 8px;
  border-radius: 4px;
}

.theme-option:hover {
  opacity: 0.8;
  background: var(--color-hover-overlay);
}

.theme-option.active {
  opacity: 1;
  font-weight: 600;
  color: var(--color-accent-warm);
  text-shadow: 0 0 2px var(--glow-accent);
  background: color-mix(in srgb, var(--color-accent-warm) 20%, transparent 80%);
}

.theme-separator {
  opacity: 0.4;
  font-weight: 400;
  pointer-events: none;
}

.theme-content {
  display: flex;
  flex-direction: column;
  gap: 8px;
  overflow: hidden;
  transition: max-height 0.3s ease, opacity 0.3s ease;
  max-height: 200px;
  opacity: 1;
  margin-top: 12px;
}

.theme-content.collapsed {
  max-height: 0;
  opacity: 0;
  margin-top: 0;
}

.export-mode-selector {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0;
  margin-top: 12px;
  padding: 8px 12px;
  background: var(--paper);
  border: 1px solid var(--ink);
  border-radius: 4px;
  font-family: 'Space Mono', monospace;
  font-size: 12px;
  color: var(--ink);
  transition: all 0.2s ease;
}

.export-mode-selector:hover {
  background: color-mix(in srgb, var(--paper) 90%, var(--accent) 10%);
}

.export-option {
  background: none;
  border: none;
  color: var(--ink);
  padding: 4px 8px;
  border-radius: 2px;
  font-family: 'Space Mono', monospace;
  font-size: 12px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.export-option:hover {
  background: color-mix(in srgb, var(--accent) 20%, transparent 80%);
}

.export-option.active {
  background: var(--accent);
  color: var(--paper);
  font-weight: 600;
}

.export-separator {
  color: var(--ink);
  opacity: 0.5;
  font-weight: 300;
}

/* Loop Button States - Match Bounce Button */
.loop-button.loop-enabled {
  background: var(--color-chassis);
  border: 1px solid var(--color-text-primary);
  border-radius: 6px;
}
.loop-button.loop-enabled:hover {
  background: color-mix(in srgb, var(--color-chassis) 85%, var(--color-accent-warm) 15%);
}
.loop-button.loop-enabled:active {
  background: color-mix(in srgb, var(--color-chassis) 96%, var(--color-active-overlay) 4%);
  transform: translateY(1px);
}
.loop-button.loop-disabled {
  opacity: 0.5;
  cursor: not-allowed;
}
.loop-button.loop-disabled:hover {
  background: var(--color-chassis);
  transform: none;
}

